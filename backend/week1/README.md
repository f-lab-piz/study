# 1ì£¼ì°¨: ë°±ì—”ë“œ ê° ì¡ê¸° + FastAPI ì²« ì‹¤í–‰

## í•µì‹¬ ëª©í‘œ

- ë°±ì—”ë“œì˜ ì—­í•  ì´í•´
- FastAPIë¡œ API í•˜ë‚˜ ì§ì ‘ ë„ì›Œë³´ê¸°

---

## 1. ë°±ì—”ë“œë€ ë¬´ì—‡ì¸ê°€

### í”„ë¡ íŠ¸ì—”ë“œ vs ë°±ì—”ë“œ

```
[ì‚¬ìš©ì] â†’ [í”„ë¡ íŠ¸ì—”ë“œ] â†’ [ë°±ì—”ë“œ] â†’ [ë°ì´í„°ë² ì´ìŠ¤]
           (í™”ë©´)         (ë¡œì§)      (ì €ì¥)
```

- **í”„ë¡ íŠ¸ì—”ë“œ**: ì‚¬ìš©ìê°€ ë³´ëŠ” í™”ë©´ (ì›¹, ì•±)
- **ë°±ì—”ë“œ**: ë°ì´í„° ì²˜ë¦¬, ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§, DB ì—°ë™
- **API**: í”„ë¡ íŠ¸ì™€ ë°±ì—”ë“œê°€ ì†Œí†µí•˜ëŠ” ì•½ì†

### APIë€?

API(Application Programming Interface)ëŠ” ì„œë¡œ ë‹¤ë¥¸ ì†Œí”„íŠ¸ì›¨ì–´ê°€ í†µì‹ í•˜ëŠ” ë°©ë²•ì„ ì •ì˜í•œ ê²ƒì´ë‹¤.

ì›¹ì—ì„œëŠ” ì£¼ë¡œ **REST API**ë¥¼ ì‚¬ìš©í•œë‹¤:

```
ìš”ì²­(Request)   â†’  ë°±ì—”ë“œ  â†’  ì‘ë‹µ(Response)
GET /users          ì²˜ë¦¬        [{"name": "ê¹€ì² ìˆ˜"}, ...]
```

- í´ë¼ì´ì–¸íŠ¸ê°€ **ìš”ì²­**ì„ ë³´ë‚´ë©´
- ì„œë²„ê°€ **ì²˜ë¦¬**í•˜ê³ 
- **ì‘ë‹µ**ì„ ëŒë ¤ì¤€ë‹¤

### HTTP ë©”ì„œë“œ

| ë©”ì„œë“œ | ìš©ë„ | ì˜ˆì‹œ |
|--------|------|------|
| GET | ì¡°íšŒ | ìœ ì € ëª©ë¡ ê°€ì ¸ì˜¤ê¸° |
| POST | ìƒì„± | ìƒˆ ìœ ì € ë§Œë“¤ê¸° |
| PUT | ì „ì²´ ìˆ˜ì • | ìœ ì € ì •ë³´ ì „ì²´ ë³€ê²½ |
| PATCH | ë¶€ë¶„ ìˆ˜ì • | ìœ ì € ì´ë¦„ë§Œ ë³€ê²½ |
| DELETE | ì‚­ì œ | ìœ ì € ì‚­ì œ |

### ë°ì´í„°ë¥¼ ì–´ë””ì— ë‹´ì•„ ë³´ë‚´ëŠ”ê°€? (URL vs Body)

HTTP ìš”ì²­ì—ì„œ ë°ì´í„°ë¥¼ ì„œë²„ë¡œ ì „ë‹¬í•˜ëŠ” ë°©ë²•ì€ í¬ê²Œ **URL**ê³¼ **Body** ë‘ ê°€ì§€ê°€ ìˆë‹¤.

#### URLì— ë°ì´í„° ë„£ê¸°

URLì— ë°ì´í„°ë¥¼ ë„£ëŠ” ë°©ì‹ì€ 2ê°€ì§€ê°€ ìˆë‹¤:

**1. Path Parameter (ê²½ë¡œ ë§¤ê°œë³€ìˆ˜)**

```
GET /users/123
         â†‘
         íŠ¹ì • ìœ ì €ì˜ ID
```

- URL ê²½ë¡œì˜ ì¼ë¶€ë¡œ ë°ì´í„°ë¥¼ ì „ë‹¬
- **íŠ¹ì • ë¦¬ì†ŒìŠ¤ë¥¼ ì‹ë³„**í•  ë•Œ ì‚¬ìš©
- ì˜ˆ: `/users/123` â†’ IDê°€ 123ì¸ ìœ ì €

**2. Query Parameter (ì¿¼ë¦¬ ë§¤ê°œë³€ìˆ˜)**

```
GET /users?page=1&limit=10
          â†‘
          ? ë’¤ì— key=value í˜•íƒœë¡œ ì „ë‹¬
```

- URL ëì— `?key=value&key2=value2` í˜•íƒœë¡œ ì „ë‹¬
- **í•„í„°ë§, ì •ë ¬, í˜ì´ì§€ë„¤ì´ì…˜** ë“±ì— ì‚¬ìš©
- ì˜ˆ: `/users?role=admin&sort=name` â†’ admin ìœ ì €ë¥¼ ì´ë¦„ìˆœìœ¼ë¡œ

#### Bodyì— ë°ì´í„° ë„£ê¸°

```
POST /users
Content-Type: application/json

{
    "name": "ê¹€ì² ìˆ˜",
    "email": "kim@example.com",
    "age": 25
}
```

- HTTP ìš”ì²­ì˜ ë³¸ë¬¸(Body)ì— ë°ì´í„°ë¥¼ ë‹´ì•„ ì „ì†¡
- ì£¼ë¡œ **JSON í˜•ì‹** ì‚¬ìš©
- **ìƒì„±í•˜ê±°ë‚˜ ìˆ˜ì •í•  ë°ì´í„°**ë¥¼ ì „ë‹¬í•  ë•Œ ì‚¬ìš©
- URLì— ë…¸ì¶œë˜ì§€ ì•Šì•„ **ë¯¼ê°í•œ ë°ì´í„°** ì „ë‹¬ì— ì í•©

#### URL vs Body ë¹„êµ

| êµ¬ë¶„ | URL (Path/Query) | Body |
|------|------------------|------|
| ìš©ë„ | ë¦¬ì†ŒìŠ¤ ì‹ë³„, í•„í„°ë§, ì¡°íšŒ ì¡°ê±´ | ìƒì„±/ìˆ˜ì •í•  ë°ì´í„° |
| ë°ì´í„° í¬ê¸° | ì œí•œì  (URL ê¸¸ì´ ì œí•œ) | ëŒ€ìš©ëŸ‰ ê°€ëŠ¥ |
| ë³´ì•ˆ | ë¸Œë¼ìš°ì € íˆìŠ¤í† ë¦¬/ë¡œê·¸ì— ë…¸ì¶œ | ìƒëŒ€ì ìœ¼ë¡œ ì•ˆì „ |
| ìºì‹± | ê°€ëŠ¥ (GET ìš”ì²­) | ë¶ˆê°€ëŠ¥ |
| ë°ì´í„° í˜•ì‹ | ë¬¸ìì—´ | JSON, XML ë“± êµ¬ì¡°í™”ëœ ë°ì´í„° |

#### CRUDë³„ ë°ì´í„° ì „ë‹¬ ìœ„ì¹˜

| ë™ì‘ | HTTP ë©”ì„œë“œ | URL | Body |
|------|-------------|-----|------|
| **C**reate (ìƒì„±) | POST | ë¦¬ì†ŒìŠ¤ ê²½ë¡œë§Œ | âœ… ìƒì„±í•  ë°ì´í„° |
| **R**ead (ì¡°íšŒ) | GET | âœ… ëŒ€ìƒ ID, í•„í„° ì¡°ê±´ | âŒ ì‚¬ìš© ì•ˆí•¨ |
| **U**pdate (ìˆ˜ì •) | PUT/PATCH | âœ… ìˆ˜ì •í•  ëŒ€ìƒ ID | âœ… ìˆ˜ì •í•  ë°ì´í„° |
| **D**elete (ì‚­ì œ) | DELETE | âœ… ì‚­ì œí•  ëŒ€ìƒ ID | âŒ ë³´í†µ ì‚¬ìš© ì•ˆí•¨ |

**ì‹¤ì œ ì˜ˆì‹œ:**

```bash
# Create - Bodyì— ìƒì„±í•  ë°ì´í„°
POST /users
Body: {"name": "ê¹€ì² ìˆ˜", "email": "kim@example.com"}

# Read - URLì— ì¡°íšŒ ì¡°ê±´
GET /users/123              # íŠ¹ì • ìœ ì € ì¡°íšŒ (Path)
GET /users?role=admin       # í•„í„°ë§ ì¡°íšŒ (Query)

# Update - URLì— ëŒ€ìƒ, Bodyì— ìˆ˜ì • ë°ì´í„°
PUT /users/123
Body: {"name": "ê¹€ì˜í¬", "email": "kim2@example.com"}

# Delete - URLì— ì‚­ì œ ëŒ€ìƒ
DELETE /users/123
```

> ğŸ’¡ **í•µì‹¬ ì •ë¦¬**
> - **GET/DELETE**: URLë¡œë§Œ ë°ì´í„° ì „ë‹¬ (ë­˜ ì¡°íšŒ/ì‚­ì œí• ì§€)
> - **POST**: Bodyë¡œ ë°ì´í„° ì „ë‹¬ (ë­˜ ë§Œë“¤ì§€)
> - **PUT/PATCH**: URL(ëŒ€ìƒ) + Body(ë°ì´í„°) ë‘˜ ë‹¤ ì‚¬ìš©

---

## 2. ê°œë°œ í™˜ê²½ ì¤€ë¹„

### uvë€?

[uv](https://docs.astral.sh/uv/)ëŠ” Rustë¡œ ì‘ì„±ëœ Python íŒ¨í‚¤ì§€ ë° í”„ë¡œì íŠ¸ ê´€ë¦¬ ë„êµ¬ë‹¤.

ê¸°ì¡´ Python ìƒíƒœê³„ì˜ ì—¬ëŸ¬ ë„êµ¬ë“¤ì„ í•˜ë‚˜ë¡œ í†µí•©í–ˆë‹¤:

| ê¸°ì¡´ ë„êµ¬ | uvì—ì„œ ëŒ€ì²´ |
|-----------|-------------|
| pip | `uv pip install` |
| pip-tools | `uv pip compile` |
| virtualenv | `uv venv` |
| pyenv | `uv python install` |
| poetry, pipenv | `uv init`, `uv add` |

### uvì˜ ì¥ì 

1. **ë¹ ë¥´ë‹¤**: pip ëŒ€ë¹„ 10~100ë°° ë¹ ë¦„ (Rust ê¸°ë°˜)
2. **í†µí•©**: íŒ¨í‚¤ì§€ ì„¤ì¹˜, ê°€ìƒí™˜ê²½, Python ë²„ì „ ê´€ë¦¬ë¥¼ í•œ ë„êµ¬ë¡œ
3. **ìë™ ê°€ìƒí™˜ê²½**: `uv run` í•˜ë©´ ê°€ìƒí™˜ê²½ ìë™ ìƒì„±/í™œì„±í™”
4. **lockfile ì§€ì›**: `uv.lock`ìœ¼ë¡œ ì˜ì¡´ì„± ë²„ì „ ê³ ì •

### uv ì„¤ì¹˜

**macOS / Linux:**

```bash
curl -LsSf https://astral.sh/uv/install.sh | sh
```

**Windows (PowerShell):**

```powershell
powershell -ExecutionPolicy ByPass -c "irm https://astral.sh/uv/install.ps1 | iex"
```

**Homebrew (macOS):**

```bash
brew install uv
```

**ì„¤ì¹˜ í™•ì¸:**

```bash
uv --version
# uv 0.5.x
```

### í”„ë¡œì íŠ¸ ì‹¤í–‰

```bash
# week1 í´ë”ë¡œ ì´ë™
cd week1

# ì˜ì¡´ì„± ì„¤ì¹˜ & ì„œë²„ ì‹¤í–‰ (í•œ ë²ˆì—!)
uv run uvicorn main:app --reload --host 0.0.0.0
```

`uv run`ì´ í•˜ëŠ” ì¼:
1. `pyproject.toml`ì„ ì½ê³ 
2. ê°€ìƒí™˜ê²½ì´ ì—†ìœ¼ë©´ ìë™ ìƒì„± (`.venv/`)
3. í•„ìš”í•œ íŒ¨í‚¤ì§€ ì„¤ì¹˜
4. ê°€ìƒí™˜ê²½ ì•ˆì—ì„œ ëª…ë ¹ì–´ ì‹¤í–‰

### --host ì˜µì…˜ ì´í•´í•˜ê¸°

```bash
# ë¡œì»¬ì—ì„œë§Œ ì ‘ê·¼ ê°€ëŠ¥ (ê¸°ë³¸ê°’)
uvicorn main:app --host 127.0.0.1

# ì™¸ë¶€ì—ì„œë„ ì ‘ê·¼ ê°€ëŠ¥
uvicorn main:app --host 0.0.0.0
```

| ì˜µì…˜ | ì ‘ê·¼ ë²”ìœ„ | ì‚¬ìš© ìƒí™© |
|------|----------|----------|
| `127.0.0.1` (ê¸°ë³¸) | ë‚´ ì»´í“¨í„°ì—ì„œë§Œ | í˜¼ì ê°œë°œí•  ë•Œ |
| `0.0.0.0` | ê°™ì€ ë„¤íŠ¸ì›Œí¬ì˜ ëª¨ë“  ê¸°ê¸° | íŒ€ì›ì—ê²Œ ë³´ì—¬ì¤„ ë•Œ, ëª¨ë°”ì¼ í…ŒìŠ¤íŠ¸ |

#### 127.0.0.1 vs 0.0.0.0 - ì™œ ë‹¤ë¥¸ê°€?

ë¨¼ì € ì»´í“¨í„°ì˜ **ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤**ë¥¼ ì´í•´í•´ì•¼ í•œë‹¤.

**ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ë€?**

ì»´í“¨í„°ê°€ ë„¤íŠ¸ì›Œí¬ì™€ í†µì‹ í•˜ëŠ” "ë¬¸"ì´ë¼ê³  ìƒê°í•˜ë©´ ëœë‹¤. ì»´í“¨í„° í•˜ë‚˜ì— ì—¬ëŸ¬ ê°œì˜ ë¬¸ì´ ìˆë‹¤:

```
ë‚´ ì»´í“¨í„°
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                 â”‚
â”‚   [ì„œë²„ í”„ë¡œê·¸ë¨]                                â”‚
â”‚        â†“ ì–´ëŠ ë¬¸ì—ì„œ ì†ë‹˜ì„ ë°›ì„ê¹Œ?              â”‚
â”‚                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ë¬¸1: lo0 (ë£¨í”„ë°±)     â”‚  ë¬¸2: en0 (Wi-Fi)       â”‚
â”‚  IP: 127.0.0.1        â”‚  IP: 192.168.0.10       â”‚
â”‚  ë‚´ë¶€ ì „ìš© ë¬¸          â”‚  ì™¸ë¶€ì™€ ì—°ê²°ëœ ë¬¸        â”‚
â”‚  (ìê¸° ìì‹ ë§Œ í†µê³¼)    â”‚  (ë‹¤ë¥¸ ê¸°ê¸°ê°€ ë“¤ì–´ì˜´)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**127.0.0.1 (localhost):**
- **ë£¨í”„ë°±(Loopback) ì¸í„°í˜ì´ìŠ¤**ì˜ IP ì£¼ì†Œ
- ì»´í“¨í„°ê°€ "ìê¸° ìì‹ "ì„ ê°€ë¦¬í‚¤ëŠ” íŠ¹ìˆ˜ ì£¼ì†Œ
- ë„¤íŠ¸ì›Œí¬ ë°–ìœ¼ë¡œ ë‚˜ê°€ì§€ ì•ŠìŒ â†’ ì™¸ë¶€ì—ì„œ ì ‘ê·¼ ë¶ˆê°€
- ë¹„ìœ : **ì§‘ ì•ˆì—ì„œë§Œ í†µí•˜ëŠ” ë‚´ì„  ì „í™”**

**192.168.x.x (ì‚¬ì„¤ IP):**
- **ì‹¤ì œ ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤**(Wi-Fi, ì´ë”ë„·)ì˜ IP ì£¼ì†Œ
- ê°™ì€ ë„¤íŠ¸ì›Œí¬ì˜ ë‹¤ë¥¸ ê¸°ê¸°ê°€ ì´ ì£¼ì†Œë¡œ ì ‘ê·¼ ê°€ëŠ¥
- ë¹„ìœ : **ì™¸ë¶€ì—ì„œ ê±¸ ìˆ˜ ìˆëŠ” ì „í™”ë²ˆí˜¸**

#### --hostê°€ í•˜ëŠ” ì¼

`--host`ëŠ” ì„œë²„ê°€ **ì–´ëŠ ë¬¸(ì¸í„°í˜ì´ìŠ¤)ì—ì„œ ìš”ì²­ì„ ë°›ì„ì§€** ê²°ì •í•œë‹¤:

```
--host 127.0.0.1 (ê¸°ë³¸ê°’)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   [ì„œë²„] â† 127.0.0.1 ë¬¸ì—ì„œë§Œ ëŒ€ê¸°              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ë¬¸1: 127.0.0.1  âœ…   â”‚  ë¬¸2: 192.168.0.10  âŒ  â”‚
â”‚  (ì—¬ê¸°ì„œë§Œ ë°›ìŒ)       â”‚  (ì•ˆ ë°›ìŒ)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â†’ ë‚´ ì»´í“¨í„°ì—ì„œ 127.0.0.1:8000 ì ‘ì†: âœ… ì„±ê³µ
â†’ ë‹¤ë¥¸ ê¸°ê¸°ì—ì„œ 192.168.0.10:8000 ì ‘ì†: âŒ ì‹¤íŒ¨ (ë¬¸ì´ ë‹«í˜€ìˆìŒ)
```

```
--host 0.0.0.0
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   [ì„œë²„] â† ëª¨ë“  ë¬¸ì—ì„œ ëŒ€ê¸°                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ë¬¸1: 127.0.0.1  âœ…   â”‚  ë¬¸2: 192.168.0.10  âœ…  â”‚
â”‚  (ë°›ìŒ)               â”‚  (ë°›ìŒ)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â†’ ë‚´ ì»´í“¨í„°ì—ì„œ 127.0.0.1:8000 ì ‘ì†: âœ… ì„±ê³µ
â†’ ë‹¤ë¥¸ ê¸°ê¸°ì—ì„œ 192.168.0.10:8000 ì ‘ì†: âœ… ì„±ê³µ
```

#### 0.0.0.0ì˜ ì˜ë¯¸

`0.0.0.0`ì€ **"ëª¨ë“  ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤"**ë¥¼ ì˜ë¯¸í•˜ëŠ” íŠ¹ìˆ˜ ì£¼ì†Œë‹¤.

- ì‹¤ì œë¡œ ì¡´ì¬í•˜ëŠ” IP ì£¼ì†Œê°€ ì•„ë‹˜
- "ì–´ë–¤ ì¸í„°í˜ì´ìŠ¤ë¡œ ë“¤ì–´ì˜¤ë“  ë‹¤ ë°›ê² ë‹¤"ëŠ” ì˜ë¯¸
- ì„œë²„ ë°”ì¸ë”© ìš©ë„ë¡œë§Œ ì‚¬ìš©ë˜ëŠ” ë©”íƒ€ ì£¼ì†Œ

```python
# ë¹„ìœ ë¡œ ì´í•´í•˜ê¸°

# --host 127.0.0.1
"1ë²ˆ ë¬¸ì—ì„œë§Œ ì†ë‹˜ ë°›ì„ê²Œìš”"

# --host 192.168.0.10
"2ë²ˆ ë¬¸ì—ì„œë§Œ ì†ë‹˜ ë°›ì„ê²Œìš”"

# --host 0.0.0.0
"ëª¨ë“  ë¬¸ì—ì„œ ì†ë‹˜ ë°›ì„ê²Œìš”"
```

> âš ï¸ **ì£¼ì˜**: `0.0.0.0`ìœ¼ë¡œ ì„œë²„ë¥¼ ì—´ë©´ ê°™ì€ ë„¤íŠ¸ì›Œí¬ì˜ ëˆ„êµ¬ë‚˜ ì ‘ê·¼ ê°€ëŠ¥í•˜ë‹¤.
> ê³µìš© Wi-Fiì—ì„œëŠ” ë³´ì•ˆì— ì£¼ì˜!

#### ë‚´ IP í™•ì¸í•˜ê¸°

```bash
# macOS/Linux
ifconfig | grep "inet " | grep -v 127.0.0.1

# Windows
ipconfig
```

ì˜ˆ: ë‚´ IPê°€ `192.168.0.10`ì´ë©´ â†’ ë‹¤ë¥¸ ê¸°ê¸°ì—ì„œ `http://192.168.0.10:8000`ìœ¼ë¡œ ì ‘ì†

### ì‹¤í–‰ ê²°ê³¼

```
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [12345] using StatReload
INFO:     Started server process [12346]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
```

- ë‚´ ì»´í“¨í„°: http://127.0.0.1:8000 ë˜ëŠ” http://localhost:8000
- ë‹¤ë¥¸ ê¸°ê¸°: http://{ë‚´ IP ì£¼ì†Œ}:8000

---

## 3. FastAPI ì†Œê°œ

### FastAPIë€?

[FastAPI](https://fastapi.tiangolo.com/)ëŠ” Pythonìœ¼ë¡œ APIë¥¼ ë§Œë“œëŠ” í˜„ëŒ€ì ì¸ ì›¹ í”„ë ˆì„ì›Œí¬ë‹¤.

2018ë…„ SebastiÃ¡n RamÃ­rezê°€ ë§Œë“¤ì—ˆê³ , í˜„ì¬ Python ì›¹ í”„ë ˆì„ì›Œí¬ ì¤‘ ê°€ì¥ ë¹ ë¥´ê²Œ ì„±ì¥í•˜ê³  ìˆë‹¤.

### FastAPIì˜ ì¥ì 

1. **ë¹ ë¥¸ ì„±ëŠ¥**: Node.js, Goì™€ ë¹„ìŠ·í•œ ìˆ˜ì¤€ì˜ ì„±ëŠ¥
2. **ë¹ ë¥¸ ê°œë°œ**: íƒ€ì… íŒíŠ¸ ê¸°ë°˜ìœ¼ë¡œ ì½”ë“œëŸ‰ ê°ì†Œ
3. **ìë™ ë¬¸ì„œí™”**: Swagger UI, ReDoc ìë™ ìƒì„±
4. **íƒ€ì… ê²€ì¦**: Pydanticìœ¼ë¡œ ìš”ì²­/ì‘ë‹µ ìë™ ê²€ì¦
5. **ë¹„ë™ê¸° ì§€ì›**: `async/await` ë„¤ì´í‹°ë¸Œ ì§€ì›
6. **í‘œì¤€ ê¸°ë°˜**: OpenAPI, JSON Schema í‘œì¤€ ì¤€ìˆ˜

### Uvicorn, Starlette, FastAPIì˜ ê´€ê³„

ì´ ì„¸ ê°€ì§€ëŠ” ê°ê° ë‹¤ë¥¸ ì—­í• ì„ ë‹´ë‹¹í•˜ë©°, í•¨ê»˜ ë™ì‘í•œë‹¤:

```
HTTP ìš”ì²­ì´ ë“¤ì–´ì˜¤ë©´...

[í´ë¼ì´ì–¸íŠ¸] â”€â”€HTTP ìš”ì²­â”€â”€â–¶ [Uvicorn] â”€â”€â–¶ [Starlette] â”€â”€â–¶ [FastAPI] â”€â”€â–¶ [ë„ˆì˜ ì½”ë“œ]
                              â”‚              â”‚               â”‚
                           ì„œë²„ ì—­í•       ì›¹ ê¸°ëŠ¥          í¸ì˜ ê¸°ëŠ¥
                          (ë¬¸ì§€ê¸°)       (ë°°ë‹¬ë¶€)         (ë¹„ì„œ)
```

#### 1. Uvicorn - ì„œë²„ (Server)

**ì—­í• : HTTP ìš”ì²­ì„ ë°›ê³  ì‘ë‹µì„ ë³´ë‚´ëŠ” "ë¬¸ì§€ê¸°"**

```
ì¸í„°ë„· â†â”€â”€â”€â”€â”€â”€â†’ [Uvicorn] â†â”€â”€â”€â”€â”€â”€â†’ Python ì•±
              ë„¤íŠ¸ì›Œí¬ í†µì‹  ë‹´ë‹¹
```

- **ë¬´ì—‡ì„ í•˜ë‚˜?**
  - í¬íŠ¸(8000)ë¥¼ ì—´ê³  ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì„ ëŒ€ê¸°
  - HTTP ìš”ì²­ ë°ì´í„°ë¥¼ ë°›ì•„ì„œ íŒŒì‹±
  - Python ì•±ì—ê²Œ ìš”ì²­ì„ ì „ë‹¬
  - Python ì•±ì˜ ì‘ë‹µì„ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì „ì†¡

- **ë¹„ìœ **: ì‹ë‹¹ì˜ **ê±´ë¬¼** ë˜ëŠ” **ì¶œì…ë¬¸**
  - ì†ë‹˜(ìš”ì²­)ì´ ë“¤ì–´ì˜¤ëŠ” ì…êµ¬
  - ì‹¤ì œ ìš”ë¦¬(ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§)ëŠ” í•˜ì§€ ì•ŠìŒ
  - ê·¸ëƒ¥ ì†ë‹˜ì„ ë°›ê³  ìŒì‹ì„ ë‚´ë³´ë‚´ëŠ” ì—­í• 

```bash
# Uvicornì´ í•˜ëŠ” ì¼
uvicorn main:app --port 8000
# "8000ë²ˆ í¬íŠ¸ì—ì„œ ëŒ€ê¸°í•˜ë©´ì„œ, ìš”ì²­ ì˜¤ë©´ main.pyì˜ appì—ê²Œ ì „ë‹¬í•´"
```

#### 2. Starlette - ì›¹ í”„ë ˆì„ì›Œí¬ (Web Framework)

**ì—­í• : ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ê¸°ë³¸ ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” "ë°°ë‹¬ë¶€"**

```
ìš”ì²­ â†’ [Starlette] â†’ ì–´ë–¤ í•¨ìˆ˜ í˜¸ì¶œí• ì§€ ê²°ì • (ë¼ìš°íŒ…)
                   â†’ ë¯¸ë“¤ì›¨ì–´ ì‹¤í–‰
                   â†’ ì‘ë‹µ í¬ë§·íŒ…
```

- **ë¬´ì—‡ì„ í•˜ë‚˜?**
  - **ë¼ìš°íŒ…**: `/users` ìš”ì²­ì´ ì˜¤ë©´ ì–´ë–¤ í•¨ìˆ˜ë¥¼ ì‹¤í–‰í• ì§€ ê²°ì •
  - **ë¯¸ë“¤ì›¨ì–´**: ìš”ì²­/ì‘ë‹µ ì „í›„ì— ê³µí†µ ì‘ì—… ìˆ˜í–‰ (ë¡œê¹…, ì¸ì¦ ë“±)
  - **ìš”ì²­/ì‘ë‹µ ê°ì²´**: Request, Response ê°ì²´ ì œê³µ
  - **WebSocket**: ì‹¤ì‹œê°„ ì–‘ë°©í–¥ í†µì‹  ì§€ì›
  - **ì •ì  íŒŒì¼**: CSS, JS, ì´ë¯¸ì§€ íŒŒì¼ ì„œë¹™

- **ë¹„ìœ **: ì‹ë‹¹ì˜ **í™€ ë§¤ë‹ˆì €**
  - ì†ë‹˜ì„ ì–´ëŠ í…Œì´ë¸”(í•¨ìˆ˜)ë¡œ ì•ˆë‚´í• ì§€ ê²°ì •
  - ì£¼ë¬¸(ìš”ì²­)ì„ ì£¼ë°©(ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§)ì— ì „ë‹¬
  - ìŒì‹(ì‘ë‹µ)ì„ ì†ë‹˜ì—ê²Œ ì„œë¹™

```python
# Starlette ë‹¨ë… ì‚¬ìš© ì˜ˆì‹œ (FastAPI ì—†ì´)
from starlette.applications import Starlette
from starlette.responses import JSONResponse
from starlette.routing import Route

async def homepage(request):
    return JSONResponse({"message": "Hello"})

app = Starlette(routes=[
    Route("/", homepage),  # "/" ìš”ì²­ â†’ homepage í•¨ìˆ˜ ì‹¤í–‰
])
```

#### 3. FastAPI - ê³ ìˆ˜ì¤€ í”„ë ˆì„ì›Œí¬ (High-level Framework)

**ì—­í• : ê°œë°œìê°€ í¸í•˜ê²Œ APIë¥¼ ë§Œë“¤ë„ë¡ ë•ëŠ” "ë¹„ì„œ"**

```
[FastAPIê°€ ìë™ìœ¼ë¡œ í•´ì£¼ëŠ” ê²ƒë“¤]
- íƒ€ì… íŒíŠ¸ â†’ ìë™ ê²€ì¦
- í•¨ìˆ˜ ì •ì˜ â†’ ìë™ ë¬¸ì„œí™”
- Python dict â†’ JSON ë³€í™˜
```

- **ë¬´ì—‡ì„ í•˜ë‚˜?**
  - **íƒ€ì… ê²€ì¦**: `name: str`ì´ë©´ ë¬¸ìì—´ì¸ì§€ ìë™ ì²´í¬
  - **ìë™ ë¬¸ì„œí™”**: ì½”ë“œë§Œ ì¨ë„ Swagger UI ìƒì„±
  - **ì˜ì¡´ì„± ì£¼ì…**: ê³µí†µ ë¡œì§ì„ ì‰½ê²Œ ì¬ì‚¬ìš©
  - **ë°ì½”ë ˆì´í„° ë¬¸ë²•**: `@app.get("/")`ìœ¼ë¡œ ê°„í¸í•˜ê²Œ ë¼ìš°íŠ¸ ì •ì˜

- **ë¹„ìœ **: ì‹ë‹¹ì˜ **ë§¤ë‰´ì–¼ + ìë™í™” ì‹œìŠ¤í…œ**
  - ì£¼ë¬¸ì„œ(ìš”ì²­) ì–‘ì‹ì´ ë§ëŠ”ì§€ ìë™ ì²´í¬
  - ë©”ë‰´íŒ(API ë¬¸ì„œ)ì„ ìë™ìœ¼ë¡œ ë§Œë“¤ì–´ì¤Œ
  - ì…°í”„(ê°œë°œì)ëŠ” ìš”ë¦¬(ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§)ì—ë§Œ ì§‘ì¤‘

```python
# FastAPIê°€ ì œê³µí•˜ëŠ” í¸ì˜ ê¸°ëŠ¥
from fastapi import FastAPI

app = FastAPI()

@app.get("/users/{user_id}")  # â† ê°„ë‹¨í•œ ë°ì½”ë ˆì´í„° ë¬¸ë²•
def get_user(user_id: int):    # â† íƒ€ì… íŒíŠ¸ë§Œ ì¨ë„ ìë™ ê²€ì¦
    return {"user_id": user_id} # â† dict â†’ JSON ìë™ ë³€í™˜

# ìœ„ ì½”ë“œë§Œìœ¼ë¡œ:
# âœ… user_idê°€ ì •ìˆ˜ì¸ì§€ ìë™ ê²€ì¦
# âœ… /docsì— API ë¬¸ì„œ ìë™ ìƒì„±
# âœ… ì˜ëª»ëœ ìš”ì²­ ì‹œ ì—ëŸ¬ ë©”ì‹œì§€ ìë™ ìƒì„±
```

#### ì„¸ ê°€ì§€ì˜ ê´€ê³„ ì •ë¦¬

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        FastAPI                               â”‚
â”‚   "Starlette + Pydanticì„ ê°ì‹¸ì„œ ë” ì‰½ê²Œ ë§Œë“  ê²ƒ"            â”‚
â”‚   â€¢ @app.get() ë°ì½”ë ˆì´í„°                                    â”‚
â”‚   â€¢ íƒ€ì… íŒíŠ¸ ê¸°ë°˜ ìë™ ê²€ì¦                                  â”‚
â”‚   â€¢ ìë™ API ë¬¸ì„œ ìƒì„±                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Starlette (ì›¹ ê¸°ëŠ¥)      â”‚      Pydantic (ë°ì´í„° ê²€ì¦)      â”‚
â”‚  â€¢ ë¼ìš°íŒ…                  â”‚      â€¢ íƒ€ì… ê²€ì¦                 â”‚
â”‚  â€¢ ë¯¸ë“¤ì›¨ì–´                â”‚      â€¢ JSON íŒŒì‹±/ì§ë ¬í™”          â”‚
â”‚  â€¢ Request/Response       â”‚      â€¢ ì—ëŸ¬ ë©”ì‹œì§€ ìƒì„±          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                         Uvicorn                              â”‚
â”‚   "ì‹¤ì œë¡œ ì„œë²„ë¥¼ ì‹¤í–‰í•˜ê³  ë„¤íŠ¸ì›Œí¬ í†µì‹ ì„ ë‹´ë‹¹"               â”‚
â”‚   â€¢ í¬íŠ¸ ì—´ê¸°, HTTP íŒŒì‹±, ì‘ë‹µ ì „ì†¡                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

| êµ¬ì„±ìš”ì†Œ | í•œ ì¤„ ìš”ì•½ | ì—†ìœ¼ë©´? |
|----------|-----------|---------|
| **Uvicorn** | HTTP í†µì‹ ì„ ì²˜ë¦¬í•˜ëŠ” ì„œë²„ | ì•±ì„ ì‹¤í–‰í•  ìˆ˜ ì—†ìŒ |
| **Starlette** | URL â†’ í•¨ìˆ˜ ë§¤í•‘, ì›¹ ê¸°ë³¸ ê¸°ëŠ¥ | ë¼ìš°íŒ…, ë¯¸ë“¤ì›¨ì–´ ì§ì ‘ êµ¬í˜„í•´ì•¼ í•¨ |
| **FastAPI** | íƒ€ì… ê²€ì¦ + ë¬¸ì„œí™” ìë™í™” | Starletteë§Œ ì¨ë„ ë˜ì§€ë§Œ ì½”ë“œëŸ‰ ì¦ê°€ |

> ğŸ’¡ **í•µì‹¬**: FastAPIëŠ” Starlette ìœ„ì— ë§Œë“¤ì–´ì§„ ê²ƒì´ê³ , ë‘˜ ë‹¤ Uvicorn ê°™ì€ ì„œë²„ê°€ ìˆì–´ì•¼ ì‹¤í–‰ëœë‹¤.

### WSGI vs ASGI

Python ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ ì›¹ ì„œë²„ ì‚¬ì´ì˜ **ì¸í„°í˜ì´ìŠ¤ í‘œì¤€**ì´ë‹¤.

Uvicornì€ **ASGI ì„œë²„**ì¸ë°, ASGIê°€ ë­˜ê¹Œ?

**WSGI (Web Server Gateway Interface):**
- ë™ê¸° ë°©ì‹ (í•œ ë²ˆì— í•˜ë‚˜ì”©)
- ìš”ì²­ í•˜ë‚˜ë‹¹ ìŠ¤ë ˆë“œ/í”„ë¡œì„¸ìŠ¤ í•˜ë‚˜
- Flask, Django (ê¸°ë³¸) ì—ì„œ ì‚¬ìš©

**ASGI (Asynchronous Server Gateway Interface):**
- ë¹„ë™ê¸° ë°©ì‹ (ë™ì‹œì— ì—¬ëŸ¬ ê°œ)
- í•˜ë‚˜ì˜ í”„ë¡œì„¸ìŠ¤ê°€ ì—¬ëŸ¬ ìš”ì²­ì„ ë™ì‹œ ì²˜ë¦¬ ê°€ëŠ¥
- FastAPI, Starlette, Django Channelsì—ì„œ ì‚¬ìš©

```python
# WSGI ë°©ì‹ (ë™ê¸°) - í•œ ìš”ì²­ ì²˜ë¦¬ ì¤‘ì—” ë‹¤ë¥¸ ìš”ì²­ ëŒ€ê¸°
def application(environ, start_response):
    response = process_request(environ)  # ì—¬ê¸°ì„œ ë¸”ë¡œí‚¹
    return response

# ASGI ë°©ì‹ (ë¹„ë™ê¸°) - I/O ëŒ€ê¸° ì¤‘ ë‹¤ë¥¸ ìš”ì²­ ì²˜ë¦¬
async def application(scope, receive, send):
    response = await process_request(scope)  # ëŒ€ê¸° ì¤‘ ë‹¤ë¥¸ ì¼ ê°€ëŠ¥
    await send(response)
```

ASGIë¥¼ ì‚¬ìš©í•˜ë©´ DB ì¿¼ë¦¬ë‚˜ ì™¸ë¶€ API í˜¸ì¶œ ì‹œ ëŒ€ê¸° ì‹œê°„ì— ë‹¤ë¥¸ ìš”ì²­ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆì–´ íš¨ìœ¨ì ì´ë‹¤.

### ì„œë²„ ì‹¤í–‰ ëª…ë ¹ì–´ ë¶„ì„

```bash
uvicorn main:app --reload --host 0.0.0.0
```

ì´ ëª…ë ¹ì–´ë¥¼ ë¶„í•´í•˜ë©´:

```
uvicorn   main:app   --reload              --host 0.0.0.0
   â”‚         â”‚           â”‚                       â”‚
   â”‚         â”‚           â”‚                       â””â”€ ì™¸ë¶€ ì ‘ê·¼ í—ˆìš© (ëª¨ë“  IPì—ì„œ ì ‘ì† ê°€ëŠ¥)
   â”‚         â”‚           â”‚
   â”‚         â”‚           â””â”€ ì½”ë“œ ë³€ê²½ ì‹œ ìë™ ì¬ì‹œì‘ (ê°œë°œìš©)
   â”‚         â”‚
   â”‚         â””â”€ íŒŒì¼ëª…:ë³€ìˆ˜ëª… (main.pyì˜ app ë³€ìˆ˜)
   â”‚
   â””â”€ ASGI ì„œë²„ ì‹¤í–‰
```

```python
# main.py
from fastapi import FastAPI

app = FastAPI()  # â† ì´ "app"ì„ uvicornì—ê²Œ ì•Œë ¤ì£¼ëŠ” ê²ƒ
#  â†‘
# ë³€ìˆ˜ëª…ì´ "app"ì´ë¯€ë¡œ main:app
# ë§Œì•½ my_application = FastAPI() ë¼ë©´ main:my_application
```

---

## 4. FastAPI ì½”ë“œ ë¶„ì„

### main.py êµ¬ì¡°

```python
from fastapi import FastAPI

# 1. FastAPI ì•± ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
app = FastAPI(
    title="1ì£¼ì°¨ - FastAPI ê¸°ë³¸",
    description="ë°±ì—”ë“œ ì²« ê±¸ìŒ",
    version="0.1.0",
)

# 2. ë¼ìš°íŠ¸(ì—”ë“œí¬ì¸íŠ¸) ì •ì˜
@app.get("/")
def root():
    """ë£¨íŠ¸ ê²½ë¡œ - ì„œë²„ê°€ ì‚´ì•„ìˆëŠ”ì§€ í™•ì¸"""
    return {"message": "Hello, Backend!"}

@app.get("/health")
def health_check():
    """í—¬ìŠ¤ì²´í¬ API - ì„œë²„ ìƒíƒœ í™•ì¸ìš©"""
    return {"status": "ok"}
```

### í•µì‹¬ ê°œë…

| ìš”ì†Œ | ì„¤ëª… |
|------|------|
| `FastAPI()` | ASGI ì• í”Œë¦¬ì¼€ì´ì…˜ ì¸ìŠ¤í„´ìŠ¤ ìƒì„± |
| `@app.get("/")` | ë°ì½”ë ˆì´í„°ë¡œ GET ìš”ì²­ì„ "/" ê²½ë¡œì— ì—°ê²° |
| `def root()` | ê²½ë¡œ ë™ì‘ í•¨ìˆ˜ (Path Operation Function) |
| `return {...}` | ë”•ì…”ë„ˆë¦¬ â†’ JSON ì‘ë‹µìœ¼ë¡œ ìë™ ë³€í™˜ |

### ë™ê¸° vs ë¹„ë™ê¸° í•¨ìˆ˜

FastAPIëŠ” ë‘˜ ë‹¤ ì§€ì›í•œë‹¤:

```python
# ë™ê¸° í•¨ìˆ˜ - ì¼ë°˜ì ì¸ ê²½ìš°
@app.get("/sync")
def sync_endpoint():
    return {"type": "sync"}

# ë¹„ë™ê¸° í•¨ìˆ˜ - I/O ì‘ì—…ì´ ë§ì€ ê²½ìš°
@app.get("/async")
async def async_endpoint():
    result = await some_async_operation()
    return {"type": "async"}
```

---

## 5. ì²« API ë§Œë“¤ê¸°

### /health API

```python
@app.get("/health")
def health_check():
    return {"status": "ok"}
```

í—¬ìŠ¤ì²´í¬ APIëŠ” ì„œë²„ê°€ ì •ìƒ ë™ì‘í•˜ëŠ”ì§€ í™•ì¸í•˜ëŠ” ìš©ë„ë‹¤. ë¡œë“œë°¸ëŸ°ì„œë‚˜ ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œì´ ì£¼ê¸°ì ìœ¼ë¡œ í˜¸ì¶œí•œë‹¤.

### ì§ì ‘ í˜¸ì¶œí•´ë³´ê¸°

**ë¸Œë¼ìš°ì €ì—ì„œ:**

http://127.0.0.1:8000/health ì ‘ì†

**curlë¡œ:**

```bash
# í„°ë¯¸ë„ì—ì„œ (ì„œë²„ ì‹¤í–‰ ì¤‘ ë‹¤ë¥¸ í„°ë¯¸ë„ì—ì„œ)
curl http://127.0.0.1:8000/health

# ê²°ê³¼
{"status":"ok"}
```

**ìƒì„¸ ì •ë³´ ë³´ê¸°:**

```bash
curl -v http://127.0.0.1:8000/health

# ì‘ë‹µ í—¤ë” í™•ì¸ ê°€ëŠ¥
# content-type: application/json
```

### JSON ì‘ë‹µ

FastAPIëŠ” Python ë”•ì…”ë„ˆë¦¬ë¥¼ ìë™ìœ¼ë¡œ JSONìœ¼ë¡œ ë³€í™˜í•œë‹¤:

```python
# Python ë”•ì…”ë„ˆë¦¬
{"status": "ok", "count": 42}

# â†’ JSON ì‘ë‹µ
# Content-Type: application/json
# {"status":"ok","count":42}
```

---

## 6. API ë¬¸ì„œ (Swagger UI & ReDoc)

FastAPIëŠ” OpenAPI ëª…ì„¸ë¥¼ ê¸°ë°˜ìœ¼ë¡œ API ë¬¸ì„œë¥¼ ìë™ ìƒì„±í•œë‹¤.

### OpenAPIë€?

OpenAPI(êµ¬ Swagger)ëŠ” REST APIë¥¼ ì„¤ëª…í•˜ëŠ” í‘œì¤€ ëª…ì„¸ë‹¤. JSON ë˜ëŠ” YAML í˜•ì‹ìœ¼ë¡œ APIì˜ ì—”ë“œí¬ì¸íŠ¸, íŒŒë¼ë¯¸í„°, ì‘ë‹µ í˜•ì‹ ë“±ì„ ì •ì˜í•œë‹¤.

FastAPIëŠ” ì½”ë“œì—ì„œ ì´ ëª…ì„¸ë¥¼ ìë™ìœ¼ë¡œ ìƒì„±í•œë‹¤.

### Swagger UI (/docs)

ë¸Œë¼ìš°ì €ì—ì„œ http://127.0.0.1:8000/docs ì ‘ì†

**Swagger UI ê¸°ëŠ¥:**

1. **API ëª©ë¡ í™•ì¸**: ëª¨ë“  ì—”ë“œí¬ì¸íŠ¸ë¥¼ í•œëˆˆì—
2. **ìƒì„¸ ì •ë³´**: ê° APIì˜ íŒŒë¼ë¯¸í„°, ì‘ë‹µ í˜•ì‹
3. **ì§ì ‘ í…ŒìŠ¤íŠ¸**: "Try it out"ìœ¼ë¡œ ì‹¤ì œ ìš”ì²­ ì „ì†¡
4. **ì‘ë‹µ í™•ì¸**: ìƒíƒœ ì½”ë“œ, í—¤ë”, ë°”ë”” í™•ì¸

**ì‹¤ìŠµ:**

1. `/docs` ì ‘ì†
2. `GET /health` ì„¹ì…˜ í´ë¦­í•´ì„œ í¼ì¹˜ê¸°
3. "Try it out" ë²„íŠ¼ í´ë¦­
4. "Execute" ë²„íŠ¼ í´ë¦­
5. ì•„ë˜ìª½ì—ì„œ ì‘ë‹µ í™•ì¸:
   - **Code**: 200 (ì„±ê³µ)
   - **Response body**: `{"status": "ok"}`
   - **Response headers**: content-type ë“±

### ReDoc (/redoc)

ë¸Œë¼ìš°ì €ì—ì„œ http://127.0.0.1:8000/redoc ì ‘ì†

Swagger UIë³´ë‹¤ ë¬¸ì„œ ê°€ë…ì„±ì— ì´ˆì ì„ ë§ì¶˜ UIë‹¤. í…ŒìŠ¤íŠ¸ ê¸°ëŠ¥ì€ ì—†ì§€ë§Œ API ë¬¸ì„œë¡œ ê³µìœ í•˜ê¸° ì¢‹ë‹¤.

### OpenAPI JSON (/openapi.json)

http://127.0.0.1:8000/openapi.json

FastAPIê°€ ìƒì„±í•œ ì›ë³¸ OpenAPI ëª…ì„¸ë¥¼ JSONìœ¼ë¡œ ë³¼ ìˆ˜ ìˆë‹¤. ë‹¤ë¥¸ ë„êµ¬ì™€ ì—°ë™í•  ë•Œ ì‚¬ìš©í•œë‹¤.

---

## 7. ì‹œê°„ì´ ë‚¨ìœ¼ë©´: CRUD ì‹¤ìŠµ

### Path Parameterë€?

URL ê²½ë¡œì˜ ì¼ë¶€ë¥¼ ë³€ìˆ˜ë¡œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ë‹¤.

```python
@app.get("/users/{user_id}")
def get_user(user_id: int):
    return {"user_id": user_id}
```

```
GET /users/123
           â†‘
      ì´ ë¶€ë¶„ì´ user_id ë³€ìˆ˜ì— ë“¤ì–´ê°
```

**Query Parameter vs Path Parameter:**

| êµ¬ë¶„ | í˜•íƒœ | ìš©ë„ | ì˜ˆì‹œ |
|------|------|------|------|
| Path | `/users/{id}` | íŠ¹ì • ë¦¬ì†ŒìŠ¤ ì‹ë³„ | `/users/123` (123ë²ˆ ìœ ì €) |
| Query | `/users?key=value` | í•„í„°ë§, ì˜µì…˜ | `/users?role=admin` (admin ìœ ì €ë“¤) |

```python
# Path Parameter - "ëˆ„êµ¬"ë¥¼ ì§€ì •
@app.get("/users/{user_id}")
def get_user(user_id: int):  # URL ê²½ë¡œì—ì„œ ì¶”ì¶œ
    ...

# Query Parameter - "ì–´ë–»ê²Œ" ì¡°íšŒí• ì§€ ì§€ì •
@app.get("/users")
def get_users(role: str = None, limit: int = 10):  # ?role=admin&limit=5
    ...

# ë‘˜ ë‹¤ ì‚¬ìš©
@app.get("/users/{user_id}/posts")
def get_user_posts(user_id: int, page: int = 1):
    # /users/123/posts?page=2
    ...
```

### CRUD API êµ¬í˜„ (DB ì—†ì´)

`main.py`ì— ê°„ë‹¨í•œ CRUD APIê°€ êµ¬í˜„ë˜ì–´ ìˆë‹¤. ì„œë²„ë¥¼ ì‹¤í–‰í•˜ê³  `/docs`ì—ì„œ í…ŒìŠ¤íŠ¸í•´ë³´ì.

```bash
uv run uvicorn main:app --reload --host 0.0.0.0
```

#### ê°€ì§œ ë°ì´í„°ë² ì´ìŠ¤

ì‹¤ì œ DB ëŒ€ì‹  Python dictë¥¼ ì‚¬ìš©í•œë‹¤:

```python
# ë©”ëª¨ë¦¬ì— ì €ì¥ (ì„œë²„ ì¬ì‹œì‘í•˜ë©´ ì´ˆê¸°í™”ë¨)
fake_db: dict[int, dict] = {
    1: {"id": 1, "name": "ê¹€ì² ìˆ˜", "email": "kim@example.com"},
    2: {"id": 2, "name": "ì´ì˜í¬", "email": "lee@example.com"},
}
```

#### Pydantic ëª¨ë¸

ìš”ì²­ Bodyì˜ í˜•ì‹ì„ ì •ì˜í•˜ê³  ìë™ ê²€ì¦í•œë‹¤:

```python
from pydantic import BaseModel

class UserCreate(BaseModel):
    name: str
    email: str

class UserUpdate(BaseModel):
    name: str | None = None  # ì„ íƒì  í•„ë“œ
    email: str | None = None
```

#### Create - POST /users

```python
@app.post("/users", status_code=201)
def create_user(user: UserCreate):
    """ìƒˆ ìœ ì € ìƒì„±"""
    new_user = {"id": next_id, "name": user.name, "email": user.email}
    fake_db[next_id] = new_user
    return new_user
```

**í…ŒìŠ¤íŠ¸:**
```bash
curl -X POST http://localhost:8000/users \
  -H "Content-Type: application/json" \
  -d '{"name": "ë°•ë¯¼ìˆ˜", "email": "park@example.com"}'
```

#### Read - GET /users, GET /users/{user_id}

```python
@app.get("/users")
def get_users():
    """ëª¨ë“  ìœ ì € ì¡°íšŒ"""
    return list(fake_db.values())

@app.get("/users/{user_id}")
def get_user(user_id: int):
    """íŠ¹ì • ìœ ì € ì¡°íšŒ"""
    if user_id not in fake_db:
        raise HTTPException(status_code=404, detail="ìœ ì €ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤")
    return fake_db[user_id]
```

**í…ŒìŠ¤íŠ¸:**
```bash
# ì „ì²´ ì¡°íšŒ
curl http://localhost:8000/users

# íŠ¹ì • ìœ ì € ì¡°íšŒ
curl http://localhost:8000/users/1

# ì—†ëŠ” ìœ ì € ì¡°íšŒ (404 ì—ëŸ¬)
curl http://localhost:8000/users/999
```

#### Update - PUT /users/{user_id}

```python
@app.put("/users/{user_id}")
def update_user(user_id: int, user: UserUpdate):
    """ìœ ì € ì •ë³´ ìˆ˜ì •"""
    if user_id not in fake_db:
        raise HTTPException(status_code=404, detail="ìœ ì €ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤")

    existing_user = fake_db[user_id]
    if user.name is not None:
        existing_user["name"] = user.name
    if user.email is not None:
        existing_user["email"] = user.email

    return existing_user
```

**í…ŒìŠ¤íŠ¸:**
```bash
curl -X PUT http://localhost:8000/users/1 \
  -H "Content-Type: application/json" \
  -d '{"name": "ê¹€ì² ìˆ˜(ìˆ˜ì •)"}'
```

#### Delete - DELETE /users/{user_id}

```python
@app.delete("/users/{user_id}")
def delete_user(user_id: int):
    """ìœ ì € ì‚­ì œ"""
    if user_id not in fake_db:
        raise HTTPException(status_code=404, detail="ìœ ì €ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤")

    deleted_user = fake_db.pop(user_id)
    return {"message": "ì‚­ì œ ì™„ë£Œ", "deleted": deleted_user}
```

**í…ŒìŠ¤íŠ¸:**
```bash
curl -X DELETE http://localhost:8000/users/1
```

### CRUD ìš”ì•½ í…Œì´ë¸”

| ë™ì‘ | HTTP ë©”ì„œë“œ | URL | Body | ì„¤ëª… |
|------|-------------|-----|------|------|
| Create | POST | `/users` | âœ… | ìƒˆ ìœ ì € ìƒì„± |
| Read (ì „ì²´) | GET | `/users` | âŒ | ëª¨ë“  ìœ ì € ì¡°íšŒ |
| Read (ë‹¨ì¼) | GET | `/users/{id}` | âŒ | íŠ¹ì • ìœ ì € ì¡°íšŒ |
| Update | PUT | `/users/{id}` | âœ… | ìœ ì € ì •ë³´ ìˆ˜ì • |
| Delete | DELETE | `/users/{id}` | âŒ | ìœ ì € ì‚­ì œ |

### ì§ì ‘ í…ŒìŠ¤íŠ¸í•´ë³´ê¸°

1. ì„œë²„ ì‹¤í–‰: `uv run uvicorn main:app --reload --host 0.0.0.0`
2. ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:8000/docs ì ‘ì†
3. ê° APIë¥¼ "Try it out"ìœ¼ë¡œ í…ŒìŠ¤íŠ¸:
   - GET /users â†’ ìœ ì € ëª©ë¡ í™•ì¸
   - POST /users â†’ ìƒˆ ìœ ì € ì¶”ê°€
   - GET /users/{user_id} â†’ ë°©ê¸ˆ ë§Œë“  ìœ ì € ì¡°íšŒ
   - PUT /users/{user_id} â†’ ìœ ì € ì •ë³´ ìˆ˜ì •
   - DELETE /users/{user_id} â†’ ìœ ì € ì‚­ì œ
   - GET /users â†’ ì‚­ì œ í™•ì¸

---

## ì •ë¦¬

ì˜¤ëŠ˜ ë°°ìš´ ê²ƒ:

- [x] ë°±ì—”ë“œëŠ” ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ê³  APIë¡œ ì‘ë‹µí•œë‹¤
- [x] uvëŠ” Python íŒ¨í‚¤ì§€/í”„ë¡œì íŠ¸ ê´€ë¦¬ ë„êµ¬ (pip + venv + pyenv í†µí•©)
- [x] FastAPIëŠ” Starlette(ì›¹) + Pydantic(ê²€ì¦) ê¸°ë°˜ì˜ ê³ ì„±ëŠ¥ í”„ë ˆì„ì›Œí¬
- [x] Uvicornì€ ASGI ì„œë²„, `--host 0.0.0.0`ìœ¼ë¡œ ì™¸ë¶€ ì ‘ê·¼ í—ˆìš©
- [x] URLì—ëŠ” Path Parameter(`/users/{id}`)ì™€ Query Parameter(`?key=value`)
- [x] Bodyì—ëŠ” JSONìœ¼ë¡œ ìƒì„±/ìˆ˜ì •í•  ë°ì´í„°ë¥¼ ë‹´ëŠ”ë‹¤
- [x] CRUD: Create(POST), Read(GET), Update(PUT), Delete(DELETE)
- [x] `/docs`ì—ì„œ Swagger UIë¡œ APIë¥¼ í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆë‹¤

ë‹¤ìŒ ì£¼: ì§„ì§œ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°í•˜ê¸°!
